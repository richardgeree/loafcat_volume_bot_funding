<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LOAFCAT Whale Checker</title>
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
  <style>
    /* Reset */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f0e6f6, #d3c1e5);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      color: #3a2a4d;
    }

    main {
      max-width: 480px;
      background: #ffffffcc;
      margin: 2rem auto;
      padding: 2rem 2.5rem;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(58, 42, 77, 0.15);
      text-align: center;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      color: #5a3e9a;
    }

    p.subtitle {
      color: #6e5c8a;
      margin-bottom: 2rem;
      font-size: 1rem;
      font-weight: 500;
    }

    button#connect-button {
      background-color: #7f54b3;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 1rem 2rem;
      font-size: 1.2rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
      box-shadow: 0 4px 12px rgba(127, 84, 179, 0.4);
      margin-bottom: 1.5rem;
      width: 100%;
      max-width: 320px;
    }

    button#connect-button:hover {
      background-color: #6a3fa8;
    }

    pre#status {
      background: #f8f5fa;
      padding: 1rem 1.2rem;
      border-radius: 10px;
      color: #3a2a4d;
      font-size: 1rem;
      text-align: left;
      min-height: 6rem;
      overflow-wrap: break-word;
      white-space: pre-wrap;
      box-shadow: inset 0 0 5px #d8cae8;
      user-select: text;
      max-width: 100%;
      margin: 0 auto;
    }

    footer {
      font-size: 0.8rem;
      color: #6e5c8a;
      padding: 1rem 1.5rem;
      text-align: center;
      background: #eee7f7;
      border-top: 1px solid #d1c6eb;
      line-height: 1.4;
      max-width: 480px;
      margin: 1rem auto 2rem;
      border-radius: 0 0 16px 16px;
    }

    footer small {
      display: block;
      margin-top: 0.5rem;
      font-style: italic;
      color: #9c8ac9;
    }

    a {
      color: #7f54b3;
      text-decoration: none;
      font-weight: 600;
    }

    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <main>
    <h1>LOAFCAT Whale Checker üê≥</h1>
    <p class="subtitle">
      Verify your LOAFCAT holdings anonymously.<br />
      Connect your Phantom wallet to confirm you hold at least 250M LOAFCAT tokens.
    </p>

    <button id="connect-button">Connect Phantom Wallet</button>
    <pre id="status" aria-live="polite" role="status"></pre>
  </main>

  <footer>
    <strong>LOAFCAT Vision:</strong> A Legacy of Joy<br />
    LOAFCAT is a beloved meme token on Solana that started as a 20-year-old internet cat meme and evolved into a thriving ecosystem.<br />
    With a play-to-earn Telegram game and now a powerful DeFi layer via LoafBank, LOAFCAT is bridging memes with real financial utility.<br /><br />

    ¬© 2025 LoafCat Studios. All rights reserved.<br />
    This document is for informational purposes only and does not constitute investment advice, an offer, or a solicitation to buy or sell any financial instrument.<br />
    Participation in digital assets involves significant risk. Past performance is not indicative of future results.<br />
    Prospective participants should conduct their own due diligence and consult with professional advisors before making any investment decisions.<br /><br />

    Powered by <a href="https://github.com" target="_blank" rel="noopener noreferrer">GitHub</a>, <a href="https://vercel.com" target="_blank" rel="noopener noreferrer">Vercel</a>, <a href="https://www.quicknode.com" target="_blank" rel="noopener noreferrer">QuickNode</a>.
  </footer>

  <script>
    const connectButton = document.getElementById("connect-button");
    const statusText = document.getElementById("status");

    const LOAFCAT_MINT = "LoafdJ3WSAvsrx3zppSGKA6sRvL9GrRrU1iRV7HkLkm";
    const MIN_BALANCE = 250_000_000;

    connectButton.addEventListener("click", async () => {
      const provider = window.solana;

      if (!provider || !provider.isPhantom) {
        alert("Phantom Wallet not found. Please install it from https://phantom.app");
        return;
      }

      try {
        statusText.textContent = "Connecting to wallet...";
        const resp = await provider.connect();
        const publicKey = resp.publicKey.toString();
        statusText.textContent = `üîó Connected: ${publicKey}\nChecking LOAFCAT balance...`;

        const connection = new solanaWeb3.Connection(
          "https://bold-shy-bush.solana-mainnet.quiknode.pro/12de2fb6da10bb23321dea265062809717f23e54/",
          "confirmed"
        );

        const tokenAccounts = await connection.getParsedTokenAccountsByOwner(
          new solanaWeb3.PublicKey(publicKey),
          { programId: new solanaWeb3.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA") }
        );

        let found = false;

        tokenAccounts.value.forEach(({ account }) => {
          const info = account.data.parsed.info;
          const mint = info.mint;
          const amountRaw = info.tokenAmount.amount;
          const decimals = info.tokenAmount.decimals;
          const amount = amountRaw / Math.pow(10, decimals);

          if (mint === LOAFCAT_MINT) {
            found = true;
            if (amount >= MIN_BALANCE) {
              statusText.textContent += `\n‚úÖ You are a whale! (${amount.toLocaleString()} LOAFCAT)`;
            } else {
              statusText.textContent += `\n‚ùå Not enough LOAFCAT (${amount.toLocaleString()})`;
            }
          }
        });

        if (!found) {
          statusText.textContent += "\n‚ùå You do not hold any LOAFCAT tokens.";
        }
      } catch (err) {
        console.error("üí• Error after wallet connection:", err);
        statusText.textContent = `‚ùå Something went wrong after connecting:\n${err.message || err}`;
      }
    });
  </script>
</body>
</html>
